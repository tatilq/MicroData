<!DOCTYPE html>
<html>
<head>
	<title></title>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

	<!-- Latest compiled and minified JavaScript -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</head>
<body>
	<h2>Historial de Ocurrencias</h2>
	<table class="table table-striped">
	  <thead>
	    <tr>
	      
	      <th class="ord_fecha">Fecha</th>
	      <th class="ord_tipo">Tipo</th>
	      <th class="ord_estado">Estado</th>
	    </tr>
	  </thead>
	  <tbody class="conte">
	   
	  </tbody>
	</table>

<script type="text/javascript">
$( document ).ready(function() {
	var datos ;
	
 	datos = JSON.parse(localStorage.getItem('ocurrencias'));
 	llenar_tabla(datos);


	function llenar_tabla(datoss){
		
		$( ".conte" ).empty();
		var datos_t = "";
	 	for (var i = 0 ; i < datoss.length ; i++) {
	 		datos_t += "<tr><td>"+datoss[i].fecha+"</td><td>"+datoss[i].tipo+"</td><td>"+datoss[i].estado+"</td><td><button>Ver detalles</button></td></tr>"

	 	}
	 	$('.conte').append(datos_t);
	 	datos_t="";
	}

	var sort_by = function(field, reverse, primer){
	   var key = primer ? 
	       function(x) {return primer(x[field])} : 
	       function(x) {return x[field]};

	   reverse = !reverse ? 1 : -1;

	   return function (a, b) {
	       return a = key(a), b = key(b), reverse * ((a > b) - (b > a));
	     } 
	}

	$( ".ord_tipo" ).click(function() {
		var datose =JSON.parse(localStorage.getItem('ocurrencias'));
		datose.sort(sort_by('tipo', false, function(a){return a.toUpperCase()}));
		llenar_tabla(datose);
		console.log(datose);
	});

	$( ".ord_fecha" ).click(function() {
		var datose =JSON.parse(localStorage.getItem('ocurrencias'));
		datose.sort(sort_by('fecha', false, function(a){return a.toUpperCase()}));
		llenar_tabla(datose);
		console.log(datose);
	});

	$( ".ord_estado" ).click(function() {
		var datose =JSON.parse(localStorage.getItem('ocurrencias'));
		datose.sort(sort_by('estado', false, function(a){return a.toUpperCase()}));
		llenar_tabla(datose);
		//console.log(datos);
	});




	
});
	
</script>
</body>
</html>