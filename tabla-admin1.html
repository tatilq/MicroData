<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="css/login.css">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="sweetAlert/sweetalert.css">
    <script src="sweetAlert/sweetalert.min.js" type="text/javascript" ></script> 
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <title>Tabla-Admin1</title>
  
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

 <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
  
  <link rel="stylesheet" href="font-awesome/css/font-awesome.min.css" type="text/css">

 <!-- Latest compiled and minified JavaScript -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</head>
<header>
        <nav class="navbar navbar-default">    
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed burger" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-logo" href="#">
                        <span class="user-photo ">
                            <img class="user-img" alt="" src="img/usuario.png" />
                        </span>
                        <p>¡Bienvenido,<br> Admin Maria!</p></a>
                </div>              
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav navbar-right text-center">
                        <li><a href="tabla-admin2.html">Reporte de Incidencias</a></li>
                        <li><a href="tabla-admin1.html">Historial de Incidencias</a></li>
                        <li><a href="#">Cerrar Sesión</a></li>
                    </ul>
                </div> 
            </div>
        </nav>
    </header>
<body> 
  <h4>Historial de Ocurrencias
      <button type="button" class="btn btn-primary btn-small getdata">Mostrar Información</button>
  </h4>
  <div id="no-more-tables">
    <table class="table table-responsive table-striped">
        <thead>
          <tr>
            <th>Fecha<i class="fa fa-filter ord_fecha" aria-hidden="true"></i></th>
            <th >Tipo<i class="fa fa-filter ord_tipo" aria-hidden="true"></i></th>
            <th >Estado<i class="fa fa-filter ord_estado" aria-hidden="true"></i></th>
          </tr>
        </thead>
        <tbody class="conte">
        </tbody>
      </table>
  </div>
  
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script type="text/javascript">
$( document ).ready(function() {
  var datos ;
  var dat = [
  {id: 1,fecha : "01/04/17" , tipo : "Cita Medica", estado : "Solicitado" },
  {id: 2,fecha : "25/08/17" , tipo : "Comision por servicio", estado : "Aprovado" },
  {id: 3,fecha : "01/07/23" , tipo : "Falta injustificada", estado : "Denegado" },
  {id: 4,fecha : "08/04/02" , tipo : "Comision por servicio", estado : "Aprovado" },
  {id: 5,fecha : "08/04/15" , tipo : "Comision por servicio", estado : "Aprovado" },
  {id: 6,fecha : "07/09/23" , tipo : "Comision por servicio", estado : "Aprovado" }];
  localStorage.setItem(history,JSON.stringify(dat));
  
  $( ".getdata" ).click(function() {
    datos = JSON.parse(localStorage.getItem(history));
    llenar_tabla(datos);

 });

 function llenar_tabla(datos){
    $( ".conte" ).empty();
    var datos_t = "";
    for (var i = 0 ; i < datos.length ; i++) {
      datos_t += "<tr><td>"+datos[i].fecha+"</td><td>"+datos[i].tipo+"</td><td>"+datos[i].estado+"</td><td><button>Ver detalles</button></td></tr>"

   }
    $('.conte').append(datos_t);
    datos_t="";
  }

 var sort_by = function(field, reverse, primer){

    var key = primer ?
         function(x) {return primer(x[field])} :
         function(x) {return x[field]};

    reverse = !reverse ? 1 : -1;

    return function (a, b) {
         return a = key(a), b = key(b), reverse * ((a > b) - (b > a));
       }
  }

 $( ".ord_tipo" ).click(function() {
    datos.sort(sort_by('tipo', false, function(a){return a.toUpperCase()}));
    llenar_tabla(datos);
    //console.log(datos);
  });

 $( ".ord_fecha" ).click(function() {
    datos.sort(sort_by('fecha', false, function(a){return a.toUpperCase()}));
    llenar_tabla(datos);
    //console.log(datos);
  });

 $( ".ord_estado" ).click(function() {
    datos.sort(sort_by('estado', false, function(a){return a.toUpperCase()}));
    llenar_tabla(datos);
    //console.log(datos);
  });
  
});
  
</script>
</body>
</html>